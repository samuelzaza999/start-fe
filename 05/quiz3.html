<!-- 
    https://hianna.tistory.com/469
    https://webisfree.com/2015-10-23/[%EC%A0%9C%EC%9D%B4%EC%BF%BC%EB%A6%AC]-%EC%9A%94%EC%86%8C-%EB%B3%B5%EC%82%AC%ED%95%98%EA%B8%B0-clone()
    https://cpro95.tistory.com/149
    https://stackoverflow.com/questions/34193751/js-remove-last-child
    https://unikys.tistory.com/249
    https://xetown.com/questions/1239870
    https://ko.javascript.info/introduction-browser-events

    https://github.com/IGhost-P/start-fe/blob/main/05/quiz3/app.js
 -->

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>DOM</title>
    <style>
      body {
        padding: 10px;
      }
      .box {
        width: 100px;
        height: 30px;
        background-color: #ddd;
      }
      .red {
        background-color: red;
      }
    </style>
  </head>

  <body>
    <div>
      <input type="text" class="txt" value="hello" />
      <button class="text-btn">TEXT 넣기</button>
      <br />
      <button class="add-red">빨간색으로</button>
      <button class="add-btn">추가</button>
      <button class="delete-btn">삭제</button>
      <button class="reset-btn">초기화</button>
      <button class="toggle-btn">보이기,숨기기 토글</button>
      <button class="image-btn">이미지</button>
    </div>

    <div id="content">
      <div class="box">
        <div id="box-img"></div>
      </div>
    </div>

    <script>
      var $txt = document.querySelector(".txt");
      var $box = document.querySelector(".box");
      var $boxes = document.querySelectorAll(".box");
      var $boxImg = document.getElementById("box-img");
      var $content = document.getElementById("content");

      var boxesLength = $boxes.length;
      var clicked = false;
      var txtInBox = "";

      var $textBtn = document.querySelector(".text-btn");
      var $addRed = document.querySelector(".add-red");
      var $addBtn = document.querySelector(".add-btn");
      var $deleteBtn = document.querySelector(".delete-btn");
      var $resetBtn = document.querySelector(".reset-btn");
      var $toggleBtn = document.querySelector(".toggle-btn");
      var $imageBtn = document.querySelector(".image-btn");

      $textBtn.addEventListener("click", textBtn);
      $addRed.addEventListener("click", addRed);
      $addBtn.addEventListener("click", addBtn);
      $deleteBtn.addEventListener("click", deleteBtn);
      $resetBtn.addEventListener("click", resetBtn);
      $toggleBtn.addEventListener("click", toggleBtn);
      $imageBtn.addEventListener("click", imageBtn);

      // 4?
      function textBtn() {}

      // 1
      function addRed() {
        for (var i = 0; i < boxesLength; i++) {
          if ($boxes[i].classList.contains("red")) return;
          $boxes[i].className += " red";
        }
      }

      // 2
      function addBtn() {
        var cloneBox = $box.cloneNode();
        $content.appendChild(cloneBox);
      }

      // 3
      function deleteBtn() {
        $content.removeChild($content.lastChild);
      }

      // 5
      function resetBtn() {
        while ($content.hasChildNodes())
          $content.removeChild($content.firstChild);
      }

      // 6
      function toggleBtn() {
        if (!clicked) {
          $content.style.display = "none";
          clicked = true;
        } else {
          $content.style.display = "block";
          clicked = false;
        }
      }

      // 7?
      function imageBtn() {
        if (!$content.classList.contains("box")) {
          var cloneBox = $box.cloneNode();
          $content.appendChild(cloneBox);
        }
        const image = '<a><img src="https://i.imgur.com/69NjYBH.png"></a>';
        $boxImg.innerHTML = image;
      }
    </script>
  </body>
</html>
